const Chatroom = require('../models/chatroom')


const chatController = {
  getChatRooms: async (req, res, next) => {
    const partialName = 'roomsList'

    const publicChatroomsMongoDB = await Chatroom.find({ isPublic: true }, { _id: 0, name: 1 })
    const publicChatrooms = publicChatroomsMongoDB.map(chatroom => chatroom.toObject())

    res.render('index', { partialName, publicChatrooms })
  },
  getChatRoom: (req, res, next) => {
    const partialName = 'room'
    const roomName = req.params.roomName
    res.render('index', { partialName ,roomName })
  }
}

module.exports = chatController